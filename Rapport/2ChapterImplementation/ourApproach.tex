
\graphicspath{ {2ChapterImplementation/image/} }
\chapter{Implementation}

This chapter will clarify the implementation of the approach present in \autoref{Approach}.

\section{Well-composed Interpolation}

about the well composed implementation by median, multiple by 2, the important of sign

\section{Objects labeling}

\subsection{Labeling by front propagation}
\paragraph{} From the well-composed interposed laplacian, we will label all connected regions by front propagation. A region includes all pixel that has same sign of laplacian and zeros that touch that region. By that definition, the zeros will always belong to the outer region and invariant to the contrast between 2 regions therefore this operation is self-dual. 
\paragraph{}As we only interest in the sign of the Laplacian, a region is always surrounded by only one other region. We construct at the same time the tree-of-shape as a table of parents instead of an image with the same size as original image as in \cite{geraud.13.ismm}. 

\subsection{Average gradient calculation}
\paragraph{} We aim to remove and merge notes which has low contrast with the upper note. These notes will have low gradient in the contour, by calculate average gradient of thess points, we can decide which note to remove.There are many approach to obtain the contour, for example we can use a dilation follow by a erosion using a element cross as structure element to obtain the contour. But the calculation of erosion and dilation costs, so we want a simple contour following method. 
\paragraph{} For every new region detected except the first one (root), we will first follow the outer contour of the object to calculate its average gradient. As we read the image from left to right, top to bottom, first point of new region is always the left top most point. We initialize the starting point is the one on its left and initial last-direction is 0 (direction are numbered as in \ref{directionToSearch}). We test 8 possible direction of next point to find the one which is in labeled region and has the new region on its right. The searching order is a semicircle clockwise from last-direction plus a semicircle counter clockwise from last-direction. We continue until reaching the starting point. 
\begin{figure}
\begin{tabular}{|c|c|c|}
\hline 
6 & 7 & 0 \\ 
\hline 
5 & * & 1 \\ 
\hline 
4 & 3 & 2 \\ 
\hline 
\end{tabular}  
\centering
\caption{Possible positions of next point}
\label{directionToSearch}
\end{figure}
